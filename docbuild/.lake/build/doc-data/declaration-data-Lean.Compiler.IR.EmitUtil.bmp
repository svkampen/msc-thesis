{"name":"Lean.Compiler.IR.EmitUtil","instances":[],"imports":["Lean.Compiler.InitAttr","Lean.Compiler.IR.CompilerM"],"declarations":[{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L79-L83","name":"Lean.IR.mkVarJPMaps","line":79,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.mkVarJPMaps","doc":"Return a pair `(v, j)`, where `v` is a mapping from variable/parameter to type,\nand `j` is a mapping from join point to parameters.\nThis function assumes `d` has normalized indexes (see `normids.lean`). "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.mkVarJPMaps\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">mkVarJPMaps</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(d : <a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.Decl\">Lean.IR.Decl</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.VarTypeMap\">Lean.IR.VarTypeMap</a> <a href=\"./Init/Prelude.html#Prod\">×</a> <a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.JPParamsMap\">Lean.IR.JPParamsMap</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L73-L75","name":"Lean.IR.CollectMaps.collectDecl","line":73,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.collectDecl","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.collectDecl\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectMaps</span>.<span class=\"name\">collectDecl</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.Decl\">Lean.IR.Decl</a> → <a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.Collector\">Lean.IR.CollectMaps.Collector</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L66-L71","name":"Lean.IR.CollectMaps.collectFnBody","line":66,"kind":"opaque","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.collectFnBody","doc":"`collectFnBody` assumes the variables in "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">partial def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.collectFnBody\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectMaps</span>.<span class=\"name\">collectFnBody</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.FnBody\">Lean.IR.FnBody</a> → <a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.Collector\">Lean.IR.CollectMaps.Collector</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L63-L64","name":"Lean.IR.CollectMaps.collectJP","line":63,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.collectJP","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.collectJP\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectMaps</span>.<span class=\"name\">collectJP</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(j : <a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.JoinPointId\">Lean.IR.JoinPointId</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(xs : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.Param\">Lean.IR.Param</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.Collector\">Lean.IR.CollectMaps.Collector</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L61-L62","name":"Lean.IR.CollectMaps.collectParams","line":61,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.collectParams","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.collectParams\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectMaps</span>.<span class=\"name\">collectParams</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(ps : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.Param\">Lean.IR.Param</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.Collector\">Lean.IR.CollectMaps.Collector</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L59-L60","name":"Lean.IR.CollectMaps.collectVar","line":59,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.collectVar","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.collectVar\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectMaps</span>.<span class=\"name\">collectVar</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(x : <a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.VarId\">Lean.IR.VarId</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(t : <a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.IRType\">Lean.IR.IRType</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.Collector\">Lean.IR.CollectMaps.Collector</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L58-L58","name":"Lean.IR.CollectMaps.Collector","line":58,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.Collector","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectMaps.Collector\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectMaps</span>.<span class=\"name\">Collector</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L55-L55","name":"Lean.IR.JPParamsMap","line":55,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.JPParamsMap","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.JPParamsMap\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">JPParamsMap</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L54-L54","name":"Lean.IR.VarTypeMap","line":54,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.VarTypeMap","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.VarTypeMap\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">VarTypeMap</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L51-L52","name":"Lean.IR.collectUsedDecls","line":51,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.collectUsedDecls","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.collectUsedDecls\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">collectUsedDecls</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(env : <a href=\"./Lean/Environment.html#Lean.Environment\">Lean.Environment</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(decl : <a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.Decl\">Lean.IR.Decl</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(used : <a href=\"./Lean/Data/NameMap.html#Lean.NameSet\">Lean.NameSet</a> := <a href=\"./Init/Core.html#EmptyCollection.emptyCollection\">∅</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Data/NameMap.html#Lean.NameSet\">Lean.NameSet</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L45-L47","name":"Lean.IR.CollectUsedDecls.collectDecl","line":45,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.collectDecl","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.collectDecl\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectUsedDecls</span>.<span class=\"name\">collectDecl</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.Decl\">Lean.IR.Decl</a> → <span class=\"fn\"><a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.M\">Lean.IR.CollectUsedDecls.M</a> <a href=\"./Lean/Data/NameMap.html#Lean.NameSet\">Lean.NameSet</a></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L39-L43","name":"Lean.IR.CollectUsedDecls.collectInitDecl","line":39,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.collectInitDecl","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.collectInitDecl\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectUsedDecls</span>.<span class=\"name\">collectInitDecl</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(fn : <a href=\"./Init/Prelude.html#Lean.Name\">Lean.Name</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.M\">Lean.IR.CollectUsedDecls.M</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L29-L37","name":"Lean.IR.CollectUsedDecls.collectFnBody","line":29,"kind":"opaque","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.collectFnBody","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">partial def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.collectFnBody\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectUsedDecls</span>.<span class=\"name\">collectFnBody</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.FnBody\">Lean.IR.FnBody</a> → <span class=\"fn\"><a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.M\">Lean.IR.CollectUsedDecls.M</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L26-L27","name":"Lean.IR.CollectUsedDecls.collect","line":26,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.collect","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.collect\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectUsedDecls</span>.<span class=\"name\">collect</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(f : <a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.FunId\">Lean.IR.FunId</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.M\">Lean.IR.CollectUsedDecls.M</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L24-L24","name":"Lean.IR.CollectUsedDecls.M","line":24,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.M","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.CollectUsedDecls.M\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">CollectUsedDecls</span>.<span class=\"name\">M</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(α : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L19-L20","name":"Lean.IR.usesModuleFrom","line":19,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.usesModuleFrom","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.usesModuleFrom\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">usesModuleFrom</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(env : <a href=\"./Lean/Environment.html#Lean.Environment\">Lean.Environment</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(modulePrefix : <a href=\"./Init/Prelude.html#Lean.Name\">Lean.Name</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Bool\">Bool</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Compiler/IR/EmitUtil.lean#L13-L17","name":"Lean.IR.isTailCallTo","line":13,"kind":"def","docLink":"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.isTailCallTo","doc":"Return true iff `b` is of the form `let x := g ys; ret x` "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Compiler/IR/EmitUtil.html#Lean.IR.isTailCallTo\"><span class=\"name\">Lean</span>.<span class=\"name\">IR</span>.<span class=\"name\">isTailCallTo</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(g : <a href=\"./Init/Prelude.html#Lean.Name\">Lean.Name</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(b : <a href=\"./Lean/Compiler/IR/Basic.html#Lean.IR.FnBody\">Lean.IR.FnBody</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Bool\">Bool</a></div></div>"}]}