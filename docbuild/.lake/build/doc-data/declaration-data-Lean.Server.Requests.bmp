{"name":"Lean.Server.Requests","instances":[{"typeNames":["Lean.Server.RequestError"],"name":"Lean.Server.instInhabitedRequestError","className":"Inhabited"},{"typeNames":["IO","Lean.Server.RequestM"],"name":"Lean.Server.instMonadLiftIORequestM","className":"MonadLift"},{"typeNames":["EIO","Lean.Server.RequestM"],"name":"Lean.Server.instMonadLiftEIOExceptionRequestM","className":"MonadLift"}],"imports":["Lean.DeclarationRange","Lean.Data.Json","Lean.Data.Lsp","Lean.Elab.Command","Lean.Server.FileSource","Lean.Server.FileWorker.Utils","Lean.Server.Rpc.Basic"],"declarations":[{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L351-L356","name":"Lean.Server.handleLspRequest","line":351,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.handleLspRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.handleLspRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">handleLspRequest</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(method : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(params : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L346-L349","name":"Lean.Server.routeLspRequest","line":346,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.routeLspRequest","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.routeLspRequest\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">routeLspRequest</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(method : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(params : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a> <a href=\"./Lean/Data/Lsp/Basic.html#Lean.Lsp.DocumentUri\">Lean.Lsp.DocumentUri</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L320-L344","name":"Lean.Server.chainLspRequestHandler","line":320,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.chainLspRequestHandler","doc":"NB: This method may only be called in `initialize` blocks (user or builtin).\n\nRegister another handler to invoke after the last one registered for a method.\nAt least one handler for the method must have already been registered to perform\nchaining.\n\nFor more details on the registration of a handler, see `registerLspRequestHandler`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.chainLspRequestHandler\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">chainLspRequestHandler</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(method : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(paramType : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.FromJson\">Lean.FromJson</a> <span class=\"fn\">paramType</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(respType : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.FromJson\">Lean.FromJson</a> <span class=\"fn\">respType</span></span>]</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.ToJson\">Lean.ToJson</a> <span class=\"fn\">respType</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(handler : <span class=\"fn\"><span class=\"fn\">paramType</span> → <span class=\"fn\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">respType</span></span> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">respType</span>)</span></span></span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L317-L318","name":"Lean.Server.lookupLspRequestHandler","line":317,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.lookupLspRequestHandler","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.lookupLspRequestHandler\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">lookupLspRequestHandler</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(method : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestHandler\">Lean.Server.RequestHandler</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L288-L315","name":"Lean.Server.registerLspRequestHandler","line":288,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.registerLspRequestHandler","doc":"NB: This method may only be called in `initialize` blocks (user or builtin).\n\nA registration consists of:\n- a type of JSON-parsable request data `paramType`\n- a `FileSource` instance for it so the system knows where to route requests\n- a type of JSON-serializable response data `respType`\n- an actual `handler` which runs in the `RequestM` monad and is expected\n  to produce an asynchronous `RequestTask` which does any waiting/computation\n\nA handler task may be cancelled at any time, so it should check the cancellation token when possible\nto handle this cooperatively. Any exceptions thrown in a request handler will be reported to the client\nas LSP error responses. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.registerLspRequestHandler\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">registerLspRequestHandler</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(method : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(paramType : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.FromJson\">Lean.FromJson</a> <span class=\"fn\">paramType</span></span>]</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Server/FileSource.html#Lean.Lsp.FileSource\">Lean.Lsp.FileSource</a> <span class=\"fn\">paramType</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(respType : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.ToJson\">Lean.ToJson</a> <span class=\"fn\">respType</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(handler : <span class=\"fn\"><span class=\"fn\">paramType</span> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">respType</span>)</span></span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L285-L286","name":"Lean.Server.requestHandlers","line":285,"kind":"opaque","docLink":"./Lean/Server/Requests.html#Lean.Server.requestHandlers","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">opaque</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.requestHandlers\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">requestHandlers</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <span class=\"fn\">(<a href=\"./Lean/Data/PersistentHashMap.html#Lean.PersistentHashMap\">Lean.PersistentHashMap</a> <a href=\"./Init/Prelude.html#String\">String</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestHandler\">Lean.Server.RequestHandler</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L283-L283","name":"Lean.Server.RequestHandler.handle","line":283,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestHandler.handle","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestHandler.handle\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestHandler</span>.<span class=\"name\">handle</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestHandler\">Lean.Server.RequestHandler</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a>)</span></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L282-L282","name":"Lean.Server.RequestHandler.fileSource","line":282,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestHandler.fileSource","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestHandler.fileSource\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestHandler</span>.<span class=\"name\">fileSource</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestHandler\">Lean.Server.RequestHandler</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a> → <span class=\"fn\"><a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a> <a href=\"./Lean/Data/Lsp/Basic.html#Lean.Lsp.DocumentUri\">Lean.Lsp.DocumentUri</a></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L281-L281","name":"Lean.Server.RequestHandler.mk","line":281,"kind":"ctor","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestHandler.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestHandler.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestHandler</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(fileSource : <span class=\"fn\"><a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a> → <span class=\"fn\"><a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a> <a href=\"./Lean/Data/Lsp/Basic.html#Lean.Lsp.DocumentUri\">Lean.Lsp.DocumentUri</a></span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(handle : <span class=\"fn\"><a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a>)</span></span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestHandler\">Lean.Server.RequestHandler</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L281-L283","name":"Lean.Server.RequestHandler","line":281,"kind":"structure","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestHandler","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestHandler\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestHandler</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L263-L267","name":"Lean.Server.RequestM.runTermElabM","line":263,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.runTermElabM","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.runTermElabM\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">runTermElabM</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(snap : <a href=\"./Lean/Server/Snapshots.html#Lean.Server.Snapshots.Snapshot\">Lean.Server.Snapshots.Snapshot</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(c : <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestT\">Lean.Server.RequestT</a> <a href=\"./Lean/Elab/Term.html#Lean.Elab.Term.TermElabM\">Lean.Elab.TermElabM</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">α</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L256-L260","name":"Lean.Server.RequestM.runCoreM","line":256,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.runCoreM","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.runCoreM\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">runCoreM</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(snap : <a href=\"./Lean/Server/Snapshots.html#Lean.Server.Snapshots.Snapshot\">Lean.Server.Snapshots.Snapshot</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(c : <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestT\">Lean.Server.RequestT</a> <a href=\"./Lean/CoreM.html#Lean.Core.CoreM\">Lean.CoreM</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">α</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L250-L254","name":"Lean.Server.RequestM.runCommandElabM","line":250,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.runCommandElabM","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.runCommandElabM\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">runCommandElabM</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(snap : <a href=\"./Lean/Server/Snapshots.html#Lean.Server.Snapshots.Snapshot\">Lean.Server.Snapshots.Snapshot</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(c : <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestT\">Lean.Server.RequestT</a> <a href=\"./Lean/Elab/Command.html#Lean.Elab.Command.CommandElabM\">Lean.Elab.Command.CommandElabM</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">α</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L235-L247","name":"Lean.Server.RequestM.findInfoTreeAtPosWithTrailingWhitespace","line":235,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.findInfoTreeAtPosWithTrailingWhitespace","doc":"Finds the info tree of the first snapshot task containing `pos` (including trailing whitespace),\nasynchronously. The info tree may be from a nested snapshot, such as a single tactic.\n\nSee `SnapshotTree.findInfoTreeAtPos` for details on how the search is done.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.findInfoTreeAtPosWithTrailingWhitespace\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">findInfoTreeAtPosWithTrailingWhitespace</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(doc : <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">Lean.Server.FileWorker.EditableDocument</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(pos : <a href=\"./Init/Prelude.html#String.Pos\">String.Pos</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Core.html#Task\">Task</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree\">Lean.Elab.InfoTree</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L214-L233","name":"Lean.Server.RequestM.findCmdDataAtPos","line":214,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.findCmdDataAtPos","doc":"Finds the command syntax and info tree of the first snapshot task matching `isMatchingSnapshot` and\ncontaining `pos`, asynchronously. The info tree may be from a nested snapshot,\nsuch as a single tactic.\n\nSee `SnapshotTree.findInfoTreeAtPos` for details on how the search is done.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.findCmdDataAtPos\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">findCmdDataAtPos</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(doc : <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">Lean.Server.FileWorker.EditableDocument</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(isMatchingSnapshot : <span class=\"fn\"><a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.CommandParsedSnapshot\">Lean.Language.Lean.CommandParsedSnapshot</a> → <a href=\"./Init/Prelude.html#Bool\">Bool</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(pos : <a href=\"./Init/Prelude.html#String.Pos\">String.Pos</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Core.html#Task\">Task</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Lean.Syntax\">Lean.Syntax</a> <a href=\"./Init/Prelude.html#Prod\">×</a> <a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree\">Lean.Elab.InfoTree</a>)</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L193-L211","name":"Lean.Server.RequestM.findInfoTreeAtPos","line":193,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.findInfoTreeAtPos","doc":"Finds the info tree of the first snapshot task matching `isMatchingSnapshot` and containing `pos`,\nasynchronously. The info tree may be from a nested snapshot, such as a single tactic.\n\nSee `SnapshotTree.findInfoTreeAtPos` for details on how the search is done.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.findInfoTreeAtPos\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">findInfoTreeAtPos</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(doc : <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">Lean.Server.FileWorker.EditableDocument</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(isMatchingSnapshot : <span class=\"fn\"><a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.CommandParsedSnapshot\">Lean.Language.Lean.CommandParsedSnapshot</a> → <a href=\"./Init/Prelude.html#Bool\">Bool</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(pos : <a href=\"./Init/Prelude.html#String.Pos\">String.Pos</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Core.html#Task\">Task</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree\">Lean.Elab.InfoTree</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L184-L190","name":"Lean.Server.RequestM.findCmdParsedSnap.go","line":184,"kind":"opaque","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.findCmdParsedSnap.go","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">partial def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.findCmdParsedSnap.go\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">findCmdParsedSnap</span>.<span class=\"name\">go</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(p : <span class=\"fn\"><a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.CommandParsedSnapshot\">Lean.Language.Lean.CommandParsedSnapshot</a> → <a href=\"./Init/Prelude.html#Bool\">Bool</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(cmdParsed : <a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.CommandParsedSnapshot\">Lean.Language.Lean.CommandParsedSnapshot</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Core.html#Task\">Task</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.CommandParsedSnapshot\">Lean.Language.Lean.CommandParsedSnapshot</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L174-L190","name":"Lean.Server.RequestM.findCmdParsedSnap","line":174,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.findCmdParsedSnap","doc":"Finds the first `CommandParsedSnapshot` fulfilling `p`, asynchronously. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.findCmdParsedSnap\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">findCmdParsedSnap</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(doc : <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">Lean.Server.FileWorker.EditableDocument</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(p : <span class=\"fn\"><a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.CommandParsedSnapshot\">Lean.Language.Lean.CommandParsedSnapshot</a> → <a href=\"./Init/Prelude.html#Bool\">Bool</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Core.html#Task\">Task</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Language/Lean/Types.html#Lean.Language.Lean.CommandParsedSnapshot\">Lean.Language.Lean.CommandParsedSnapshot</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L161-L171","name":"Lean.Server.RequestM.withWaitFindSnapAtPos","line":161,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.withWaitFindSnapAtPos","doc":"Create a task which waits for the snapshot containing `lspPos` and executes `f` with it.\nIf no such snapshot exists, the request fails with an error. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.withWaitFindSnapAtPos\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">withWaitFindSnapAtPos</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(lspPos : <a href=\"./Lean/Data/Lsp/Basic.html#Lean.Lsp.Position\">Lean.Lsp.Position</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(f : <span class=\"fn\"><a href=\"./Lean/Server/Snapshots.html#Lean.Server.Snapshots.Snapshot\">Lean.Server.Snapshots.Snapshot</a> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">α</span></span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">α</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L153-L159","name":"Lean.Server.RequestM.bindWaitFindSnap","line":153,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.bindWaitFindSnap","doc":"See `withWaitFindSnap`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.bindWaitFindSnap\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">bindWaitFindSnap</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{β : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(doc : <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">Lean.Server.FileWorker.EditableDocument</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(p : <span class=\"fn\"><a href=\"./Lean/Server/Snapshots.html#Lean.Server.Snapshots.Snapshot\">Lean.Server.Snapshots.Snapshot</a> → <a href=\"./Init/Prelude.html#Bool\">Bool</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(notFoundX : <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">β</span>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(x : <span class=\"fn\"><a href=\"./Lean/Server/Snapshots.html#Lean.Server.Snapshots.Snapshot\">Lean.Server.Snapshots.Snapshot</a> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">β</span>)</span></span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">β</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L143-L151","name":"Lean.Server.RequestM.withWaitFindSnap","line":143,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.withWaitFindSnap","doc":"Create a task which waits for the first snapshot matching `p`, handles various errors,\nand if a matching snapshot was found executes `x` with it. If not found, the task executes\n`notFoundX`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.withWaitFindSnap\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">withWaitFindSnap</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{β : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(doc : <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">Lean.Server.FileWorker.EditableDocument</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(p : <span class=\"fn\"><a href=\"./Lean/Server/Snapshots.html#Lean.Server.Snapshots.Snapshot\">Lean.Server.Snapshots.Snapshot</a> → <a href=\"./Init/Prelude.html#Bool\">Bool</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(notFoundX : <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">β</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(x : <span class=\"fn\"><a href=\"./Lean/Server/Snapshots.html#Lean.Server.Snapshots.Snapshot\">Lean.Server.Snapshots.Snapshot</a> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">β</span></span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">β</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L134-L141","name":"Lean.Server.RequestM.waitFindSnapAux","line":134,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.waitFindSnapAux","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.waitFindSnapAux\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">waitFindSnapAux</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(notFoundX : <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(x : <span class=\"fn\"><a href=\"./Lean/Server/Snapshots.html#Lean.Server.Snapshots.Snapshot\">Lean.Server.Snapshots.Snapshot</a> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">α</span></span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Init/System/IOError.html#IO.Error\">IO.Error</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Server/Snapshots.html#Lean.Server.Snapshots.Snapshot\">Lean.Server.Snapshots.Snapshot</a>)</span></span> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">α</span></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L130-L132","name":"Lean.Server.RequestM.bindTask","line":130,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.bindTask","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.bindTask\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">bindTask</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a> u_1}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{β : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(t : <span class=\"fn\"><a href=\"./Init/Core.html#Task\">Task</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(f : <span class=\"fn\"><span class=\"fn\">α</span> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">β</span>)</span></span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">β</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L126-L128","name":"Lean.Server.RequestM.mapTask","line":126,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.mapTask","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.mapTask\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">mapTask</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a> u_1}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{β : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(t : <span class=\"fn\"><a href=\"./Init/Core.html#Task\">Task</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(f : <span class=\"fn\"><span class=\"fn\">α</span> → <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">β</span></span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">β</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L122-L124","name":"Lean.Server.RequestM.asTask","line":122,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.asTask","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.asTask\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">asTask</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(t : <span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a> <span class=\"fn\">(<a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">α</span>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L118-L120","name":"Lean.Server.RequestM.readDoc","line":118,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.readDoc","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM.readDoc\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span>.<span class=\"name\">readDoc</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{m : <span class=\"fn\"><a href=\"./foundational_types.html\">Type</a> → <a href=\"./foundational_types.html\">Type</a> u_1</span>}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Init/Prelude.html#Monad\">Monad</a> <span class=\"fn\">m</span></span>]</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Init/Prelude.html#MonadReaderOf\">MonadReaderOf</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext\">Lean.Server.RequestContext</a> <span class=\"fn\">m</span></span>]</span></span>\n</span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><span class=\"fn\">m</span> <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">Lean.Server.FileWorker.EditableDocument</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L108-L112","name":"Lean.Server.instMonadLiftEIOExceptionRequestM","line":108,"kind":"instance","docLink":"./Lean/Server/Requests.html#Lean.Server.instMonadLiftEIOExceptionRequestM","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">instance</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.instMonadLiftEIOExceptionRequestM\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">instMonadLiftEIOExceptionRequestM</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#MonadLift\">MonadLift</a> <span class=\"fn\">(<a href=\"./Init/System/IO.html#EIO\">EIO</a> <a href=\"./Lean/Exception.html#Lean.Exception\">Lean.Exception</a>)</span> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L102-L106","name":"Lean.Server.instMonadLiftIORequestM","line":102,"kind":"instance","docLink":"./Lean/Server/Requests.html#Lean.Server.instMonadLiftIORequestM","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">instance</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.instMonadLiftIORequestM\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">instMonadLiftIORequestM</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#MonadLift\">MonadLift</a> <a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\">Lean.Server.RequestM</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L100-L100","name":"Lean.Server.RequestTask.pure","line":100,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestTask.pure","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask.pure\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestTask</span>.<span class=\"name\">pure</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a> u_1}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(a : <span class=\"fn\">α</span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\">Lean.Server.RequestTask</a> <span class=\"fn\">α</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L97-L98","name":"Lean.Server.RequestM","line":97,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM","doc":"Workers execute request handlers in this monad. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestM\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestM</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(α : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L96-L96","name":"Lean.Server.RequestT","line":96,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestT","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestT\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestT</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(m : <span class=\"fn\"><a href=\"./foundational_types.html\">Type</a> → <a href=\"./foundational_types.html\">Type</a> u_1</span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(α : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a> u_1</div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L95-L95","name":"Lean.Server.RequestTask","line":95,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestTask","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestTask\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestTask</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(α : <a href=\"./foundational_types.html\">Type</a> u_1)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a> u_1</div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L93-L93","name":"Lean.Server.RequestContext.initParams","line":93,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestContext.initParams","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext.initParams\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestContext</span>.<span class=\"name\">initParams</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext\">Lean.Server.RequestContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Data/Lsp/InitShutdown.html#Lean.Lsp.InitializeParams\">Lean.Lsp.InitializeParams</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L92-L92","name":"Lean.Server.RequestContext.hLog","line":92,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestContext.hLog","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext.hLog\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestContext</span>.<span class=\"name\">hLog</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext\">Lean.Server.RequestContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/System/IO.html#IO.FS.Stream\">IO.FS.Stream</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L91-L91","name":"Lean.Server.RequestContext.doc","line":91,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestContext.doc","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext.doc\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestContext</span>.<span class=\"name\">doc</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext\">Lean.Server.RequestContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">Lean.Server.FileWorker.EditableDocument</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L90-L90","name":"Lean.Server.RequestContext.srcSearchPath","line":90,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestContext.srcSearchPath","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext.srcSearchPath\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestContext</span>.<span class=\"name\">srcSearchPath</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext\">Lean.Server.RequestContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Util/Path.html#Lean.SearchPath\">Lean.SearchPath</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L89-L89","name":"Lean.Server.RequestContext.rpcSessions","line":89,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestContext.rpcSessions","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext.rpcSessions\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestContext</span>.<span class=\"name\">rpcSessions</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext\">Lean.Server.RequestContext</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/RBMap.html#Lean.RBMap\">Lean.RBMap</a> <a href=\"./Init/Prelude.html#UInt64\">UInt64</a> <span class=\"fn\">(<a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.RpcSession\">Lean.Server.FileWorker.RpcSession</a>)</span> <span class=\"fn\">compare</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L88-L88","name":"Lean.Server.RequestContext.mk","line":88,"kind":"ctor","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestContext.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestContext</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(rpcSessions : <span class=\"fn\"><a href=\"./Lean/Data/RBMap.html#Lean.RBMap\">Lean.RBMap</a> <a href=\"./Init/Prelude.html#UInt64\">UInt64</a> <span class=\"fn\">(<a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.RpcSession\">Lean.Server.FileWorker.RpcSession</a>)</span> <span class=\"fn\">compare</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(srcSearchPath : <a href=\"./Lean/Util/Path.html#Lean.SearchPath\">Lean.SearchPath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(doc : <a href=\"./Lean/Server/FileWorker/Utils.html#Lean.Server.FileWorker.EditableDocument\">Lean.Server.FileWorker.EditableDocument</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(hLog : <a href=\"./Init/System/IO.html#IO.FS.Stream\">IO.FS.Stream</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(initParams : <a href=\"./Lean/Data/Lsp/InitShutdown.html#Lean.Lsp.InitializeParams\">Lean.Lsp.InitializeParams</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext\">Lean.Server.RequestContext</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L88-L93","name":"Lean.Server.RequestContext","line":88,"kind":"structure","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestContext","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestContext\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestContext</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L82-L86","name":"Lean.Server.parseRequestParams","line":82,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.parseRequestParams","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.parseRequestParams\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">parseRequestParams</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(paramType : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.FromJson\">Lean.FromJson</a> <span class=\"fn\">paramType</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(params : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a> <span class=\"fn\">paramType</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L75-L78","name":"Lean.Server.RequestError.toLspResponseError","line":75,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.toLspResponseError","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError.toLspResponseError\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span>.<span class=\"name\">toLspResponseError</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(id : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.RequestID\">Lean.JsonRpc.RequestID</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(e : <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.ResponseError\">Lean.JsonRpc.ResponseError</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L72-L73","name":"Lean.Server.RequestError.ofIoError","line":72,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.ofIoError","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError.ofIoError\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span>.<span class=\"name\">ofIoError</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(e : <a href=\"./Init/System/IOError.html#IO.Error\">IO.Error</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L69-L70","name":"Lean.Server.RequestError.ofException","line":69,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.ofException","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError.ofException\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span>.<span class=\"name\">ofException</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(e : <a href=\"./Lean/Exception.html#Lean.Exception\">Lean.Exception</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L66-L67","name":"Lean.Server.RequestError.internalError","line":66,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.internalError","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError.internalError\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span>.<span class=\"name\">internalError</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(message : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L63-L64","name":"Lean.Server.RequestError.invalidParams","line":63,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.invalidParams","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError.invalidParams\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span>.<span class=\"name\">invalidParams</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(message : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L59-L61","name":"Lean.Server.RequestError.methodNotFound","line":59,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.methodNotFound","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError.methodNotFound\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span>.<span class=\"name\">methodNotFound</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(method : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L55-L57","name":"Lean.Server.RequestError.fileChanged","line":55,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.fileChanged","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError.fileChanged\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span>.<span class=\"name\">fileChanged</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L50-L50","name":"Lean.Server.instInhabitedRequestError","line":50,"kind":"instance","docLink":"./Lean/Server/Requests.html#Lean.Server.instInhabitedRequestError","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">instance</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.instInhabitedRequestError\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">instInhabitedRequestError</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Inhabited\">Inhabited</a> <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L49-L49","name":"Lean.Server.RequestError.message","line":49,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.message","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError.message\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span>.<span class=\"name\">message</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#String\">String</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L48-L48","name":"Lean.Server.RequestError.code","line":48,"kind":"def","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.code","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError.code\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span>.<span class=\"name\">code</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.ErrorCode\">Lean.JsonRpc.ErrorCode</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L47-L47","name":"Lean.Server.RequestError.mk","line":47,"kind":"ctor","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(code : <a href=\"./Lean/Data/JsonRpc.html#Lean.JsonRpc.ErrorCode\">Lean.JsonRpc.ErrorCode</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(message : <a href=\"./Init/Prelude.html#String\">String</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\">Lean.Server.RequestError</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L47-L50","name":"Lean.Server.RequestError","line":47,"kind":"structure","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Server.RequestError\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">RequestError</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L30-L41","name":"Lean.Language.SnapshotTree.findInfoTreeAtPos.goSeq","line":30,"kind":"opaque","docLink":"./Lean/Server/Requests.html#Lean.Language.SnapshotTree.findInfoTreeAtPos.goSeq","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">partial def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Language.SnapshotTree.findInfoTreeAtPos.goSeq\"><span class=\"name\">Lean</span>.<span class=\"name\">Language</span>.<span class=\"name\">SnapshotTree</span>.<span class=\"name\">findInfoTreeAtPos</span>.<span class=\"name\">goSeq</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(pos : <a href=\"./Init/Prelude.html#String.Pos\">String.Pos</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><span class=\"fn\"><a href=\"./Init/Prelude.html#List\">List</a> <span class=\"fn\">(<a href=\"./Lean/Language/Basic.html#Lean.Language.SnapshotTask\">Lean.Language.SnapshotTask</a> <a href=\"./Lean/Language/Basic.html#Lean.Language.SnapshotTree\">Lean.Language.SnapshotTree</a>)</span></span> → <span class=\"fn\"><a href=\"./Init/Core.html#Task\">Task</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree\">Lean.Elab.InfoTree</a>)</span></span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/Lean/Server/Requests.lean#L21-L41","name":"Lean.Language.SnapshotTree.findInfoTreeAtPos","line":21,"kind":"opaque","docLink":"./Lean/Server/Requests.html#Lean.Language.SnapshotTree.findInfoTreeAtPos","doc":"Finds the first (in pre-order) snapshot task in `tree` whose `range?` contains `pos` and which\ncontains an info tree, and then returns that info tree, waiting for any snapshot tasks on the way.\nSubtrees that do not contain the position are skipped without forcing their tasks.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">partial def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Requests.html#Lean.Language.SnapshotTree.findInfoTreeAtPos\"><span class=\"name\">Lean</span>.<span class=\"name\">Language</span>.<span class=\"name\">SnapshotTree</span>.<span class=\"name\">findInfoTreeAtPos</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(tree : <a href=\"./Lean/Language/Basic.html#Lean.Language.SnapshotTree\">Lean.Language.SnapshotTree</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(pos : <a href=\"./Init/Prelude.html#String.Pos\">String.Pos</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Core.html#Task\">Task</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree\">Lean.Elab.InfoTree</a>)</span></span></div></div>"}]}