{"name":"Lake.Build.Common","instances":[{"typeNames":["Lake.BuildMetadata"],"name":"Lake.instToJsonBuildMetadata","className":"Lean.ToJson"},{"typeNames":["Lake.BuildMetadata"],"name":"Lake.instFromJsonBuildMetadata","className":"Lean.FromJson"}],"imports":["Init","Lake.Config.Monad","Lake.Build.Actions","Lake.Util.JsonObject"],"declarations":[{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L357-L368","name":"Lake.computeDynlibOfShared","line":357,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.computeDynlibOfShared","doc":"Construct a `Dynlib` object for a shared library target. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.computeDynlibOfShared\"><span class=\"name\">Lake</span>.<span class=\"name\">computeDynlibOfShared</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(sharedLibTarget : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Lake/Build/Facets.html#Lake.Dynlib\">Lake.Dynlib</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L338-L355","name":"Lake.buildLeanSharedLibOfStatic","line":338,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildLeanSharedLibOfStatic","doc":"Build a shared library from a static library using `leanc`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildLeanSharedLibOfStatic\"><span class=\"name\">Lake</span>.<span class=\"name\">buildLeanSharedLibOfStatic</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(staticLibJob : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(weakArgs traceArgs : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Init/Prelude.html#String\">String</a></span> := <span class=\"fn\">#[]</span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L328-L336","name":"Lake.buildLeanExe","line":328,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildLeanExe","doc":"Build an executable by linking the results of `linkJobs` using `leanc`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildLeanExe\"><span class=\"name\">Lake</span>.<span class=\"name\">buildLeanExe</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(exeFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(linkJobs : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(weakArgs traceArgs : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Init/Prelude.html#String\">String</a></span> := <span class=\"fn\">#[]</span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L318-L326","name":"Lake.buildLeanSharedLib","line":318,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildLeanSharedLib","doc":"Build a shared library by linking the results of `linkJobs` using `leanc`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildLeanSharedLib\"><span class=\"name\">Lake</span>.<span class=\"name\">buildLeanSharedLib</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(libFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(linkJobs : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(weakArgs traceArgs : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Init/Prelude.html#String\">String</a></span> := <span class=\"fn\">#[]</span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L311-L316","name":"Lake.buildStaticLib","line":311,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildStaticLib","doc":"Build a static library from object file jobs using the `ar` packaged with Lean. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildStaticLib\"><span class=\"name\">Lake</span>.<span class=\"name\">buildStaticLib</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(libFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(oFileJobs : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L301-L309","name":"Lake.buildLeanO","line":301,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildLeanO","doc":"Build an object file from a source fie job (i.e, a `lean -c` output) using `leanc`. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildLeanO\"><span class=\"name\">Lake</span>.<span class=\"name\">buildLeanO</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(oFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(srcJob : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(weakArgs traceArgs : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Init/Prelude.html#String\">String</a></span> := <span class=\"fn\">#[]</span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L276-L299","name":"Lake.buildO","line":276,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildO","doc":"Build an object file from a source file job using `compiler`. The invocation is:\n\n```\ncompiler -c -o oFile srcFile weakArgs... traceArgs...\n```\n\nThe `traceArgs` are included as part of the dependency trace hash, whereas\nthe `weakArgs` are not. Thus, system-dependent options like `-I` or `-L` should\nbe `weakArgs` to avoid build artifact incompatibility between systems\n(i.e., a change in the file path should not cause a rebuild).\n\nYou can add more components to the trace via `extraDepTrace`,\nwhich will be computed in the resulting `BuildJob` before building.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildO\"><span class=\"name\">Lake</span>.<span class=\"name\">buildO</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(oFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(srcJob : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(weakArgs traceArgs : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Init/Prelude.html#String\">String</a></span> := <span class=\"fn\">#[]</span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(compiler : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a> := <span class=\"fn\">{ <span class=\"fn\">toString</span> := <span class=\"fn\">&quot;cc&quot;</span> }</span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(extraDepTrace : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a></span> := <span class=\"fn\"><a href=\"./Init/Prelude.html#Pure.pure\">pure</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace.nil\">Lake.BuildTrace.nil</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L265-L274","name":"Lake.inputFile","line":265,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.inputFile","doc":"A build job for file that is expected to already exist  (e.g., a data blob or source file).\n\nIf `text := true`, the file is handled as a text file rather than a binary file.\nAny byte difference in a binary file will trigger a rebuild of its dependents.\nIn contrast, text file traces have normalized line endings to avoid unnecessary\nrebuilds across platforms.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.inputFile\"><span class=\"name\">Lake</span>.<span class=\"name\">inputFile</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(path : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(text : <a href=\"./Init/Prelude.html#Bool\">Bool</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L257-L263","name":"Lake.inputTextFile","line":257,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.inputTextFile","doc":"A build job for text file that is expected to already exist (e.g., a source file).\n\nText file traces have normalized line endings to avoid unnecessary rebuilds across platforms.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.inputTextFile\"><span class=\"name\">Lake</span>.<span class=\"name\">inputTextFile</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(path : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L249-L255","name":"Lake.inputBinFile","line":249,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.inputBinFile","doc":"A build job for binary file that is expected to already exist (e.g., a data blob).\n\nAny byte difference in a binary file will trigger a rebuild of its dependents.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.inputBinFile\"><span class=\"name\">Lake</span>.<span class=\"name\">inputBinFile</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(path : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L236-L245","name":"Lake.buildFileAfterDepArray","line":236,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildFileAfterDepArray","doc":"Build `file` using `build` after `deps` have built if any of their traces change.\n\nIf `text := true`, `file` is handled as a text file rather than a binary file.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildFileAfterDepArray\"><span class=\"name\">Lake</span>.<span class=\"name\">buildFileAfterDepArray</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a> u_1}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(file : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(deps : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <span class=\"fn\">α</span>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <span class=\"fn\">α</span></span> → <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#PUnit\">PUnit</a></span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(extraDepTrace : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a></span> := <span class=\"fn\"><a href=\"./Init/Prelude.html#Pure.pure\">pure</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace.nil\">Lake.BuildTrace.nil</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(text : <a href=\"./Init/Prelude.html#Bool\">Bool</a> := <a href=\"./Init/Prelude.html#Bool.false\">false</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L225-L234","name":"Lake.buildFileAfterDepList","line":225,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildFileAfterDepList","doc":"Build `file` using `build` after `deps` have built if any of their traces change.\n\nIf `text := true`, `file` is handled as a text file rather than a binary file.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildFileAfterDepList\"><span class=\"name\">Lake</span>.<span class=\"name\">buildFileAfterDepList</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a> u_1}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(file : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(deps : <span class=\"fn\"><a href=\"./Init/Prelude.html#List\">List</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <span class=\"fn\">α</span>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><span class=\"fn\"><a href=\"./Init/Prelude.html#List\">List</a> <span class=\"fn\">α</span></span> → <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#PUnit\">PUnit</a></span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(extraDepTrace : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a></span> := <span class=\"fn\"><a href=\"./Init/Prelude.html#Pure.pure\">pure</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace.nil\">Lake.BuildTrace.nil</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(text : <a href=\"./Init/Prelude.html#Bool\">Bool</a> := <a href=\"./Init/Prelude.html#Bool.false\">false</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L210-L223","name":"Lake.buildFileAfterDep","line":210,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildFileAfterDep","doc":"Build `file` using `build` after `dep` completes if the dependency's\ntrace (and/or `extraDepTrace`) has changed.\n\nIf `text := true`, `file` is handled as a text file rather than a binary file.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildFileAfterDep\"><span class=\"name\">Lake</span>.<span class=\"name\">buildFileAfterDep</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{α : <a href=\"./foundational_types.html\">Type</a> u_1}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(file : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(dep : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><span class=\"fn\">α</span> → <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#PUnit\">PUnit</a></span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(extraDepTrace : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a></span> := <span class=\"fn\"><a href=\"./Init/Prelude.html#Pure.pure\">pure</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace.nil\">Lake.BuildTrace.nil</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(text : <a href=\"./Init/Prelude.html#Bool\">Bool</a> := <a href=\"./Init/Prelude.html#Bool.false\">false</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.SpawnM\">Lake.SpawnM</a> <span class=\"fn\">(<a href=\"./Lake/Build/Job.html#Lake.BuildJob\">Lake.BuildJob</a> <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L188-L208","name":"Lake.buildFileUnlessUpToDate","line":188,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildFileUnlessUpToDate","doc":"Builds `file` using `build` unless it already exists and `depTrace` matches\nthe trace stored in the `.trace` file. If built, save the new `depTrace` and\ncache `file`'s hash in a `.hash` file. Otherwise, try to fetch the hash from\nthe `.hash` file using `fetchFileTrace`. Build logs (if any) are saved to\na `.log.json` file and replayed from there if the build is skipped.\n\nFor example, given `file := \"foo.c\"`, compares `depTrace` with that in\n`foo.c.trace` with the hash cached in `foo.c.hash` and the log cached in\n`foo.c.trace`.\n\nIf `text := true`, `file` is hashed as a text file rather than a binary file.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildFileUnlessUpToDate\"><span class=\"name\">Lake</span>.<span class=\"name\">buildFileUnlessUpToDate</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(file : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(depTrace : <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#PUnit\">PUnit</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(text : <a href=\"./Init/Prelude.html#Bool\">Bool</a> := <a href=\"./Init/Prelude.html#Bool.false\">false</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L179-L186","name":"Lake.fetchFileTrace","line":179,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.fetchFileTrace","doc":"Fetches the trace of a file that may have already have its hash cached\nin a `.hash` file. If no such `.hash` file exists, recomputes and creates it.\n\nIf `text := true`, `file` is hashed as text file rather than a binary file.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.fetchFileTrace\"><span class=\"name\">Lake</span>.<span class=\"name\">fetchFileTrace</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(file : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(text : <a href=\"./Init/Prelude.html#Bool\">Bool</a> := <a href=\"./Init/Prelude.html#Bool.false\">false</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L162-L177","name":"Lake.fetchFileHash","line":162,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.fetchFileHash","doc":"Fetches the hash of a file that may already be cached in a `.hash` file.\nIf hash files are not trusted (e.g., with `--rehash`) or the `.hash` file does\nnot exist, it will be created with a newly computed hash.\n\nIf `text := true`, `file` is hashed as a text file rather than a binary file.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.fetchFileHash\"><span class=\"name\">Lake</span>.<span class=\"name\">fetchFileHash</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(file : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(text : <a href=\"./Init/Prelude.html#Bool\">Bool</a> := <a href=\"./Init/Prelude.html#Bool.false\">false</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Lake/Build/Trace.html#Lake.Hash\">Lake.Hash</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L154-L160","name":"Lake.clearFileHash","line":154,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.clearFileHash","doc":"Remove the cached hash of a file (its `.hash` file). "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.clearFileHash\"><span class=\"name\">Lake</span>.<span class=\"name\">clearFileHash</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(file : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L147-L152","name":"Lake.cacheFileHash","line":147,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.cacheFileHash","doc":"Computes the hash of a file and saves it to a `.hash` file. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.cacheFileHash\"><span class=\"name\">Lake</span>.<span class=\"name\">cacheFileHash</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(file : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L133-L145","name":"Lake.buildUnlessUpToDate","line":133,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildUnlessUpToDate","doc":"Checks whether `info` is up-to-date, and runs `build` to recreate it if not.\nIf rebuilt, saves the new `depTrace` and build log to `traceFile`.\n\nSee `buildUnlessUpToDate?` for more details on how Lake determines whether\n`info` is up-to-date.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildUnlessUpToDate\"><span class=\"name\">Lake</span>.<span class=\"name\">buildUnlessUpToDate</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{ι : <a href=\"./foundational_types.html\">Type</a> u_1}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lake/Build/Trace.html#Lake.CheckExists\">Lake.CheckExists</a> <span class=\"fn\">ι</span></span>]</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lake/Build/Trace.html#Lake.GetMTime\">Lake.GetMTime</a> <span class=\"fn\">ι</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(info : <span class=\"fn\">ι</span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(depTrace : <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(traceFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#PUnit\">PUnit</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(action : <a href=\"./Lake/Build/Job.html#Lake.JobAction\">Lake.JobAction</a> := <a href=\"./Lake/Build/Job.html#Lake.JobAction.build\">Lake.JobAction.build</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(oldTrace : <a href=\"./Lake/Build/Trace.html#Lake.MTime\">Lake.MTime</a> := <span class=\"fn\"><span class=\"fn\">depTrace</span>.mtime</span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#PUnit\">PUnit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L122-L131","name":"Lake.buildUnlessUpToDate?.go","line":122,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildUnlessUpToDate?.go","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildUnlessUpToDate?.go\"><span class=\"name\">Lake</span>.<span class=\"name\">buildUnlessUpToDate?</span>.<span class=\"name\">go</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(depTrace : <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(traceFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#PUnit\">PUnit</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(action : <a href=\"./Lake/Build/Job.html#Lake.JobAction\">Lake.JobAction</a> := <a href=\"./Lake/Build/Job.html#Lake.JobAction.build\">Lake.JobAction.build</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L84-L131","name":"Lake.buildUnlessUpToDate?","line":84,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.buildUnlessUpToDate?","doc":"Checks whether `info` is up-to-date, and runs `build` to recreate it if not.\nIf rebuilt, saves the new `depTrace` and build log to `traceFile`.\nReturns whether `info` was already up-to-date.\n\n**Up-to-date Checking**\n\nIf `traceFile` exists, checks that the hash in `depTrace` matches that\nof the `traceFile`. If not, and old mode is enabled (e.g., `--old`), falls back\nto the `oldTrace` modification time as the point of comparison.\nIf up-to-date, replay the build log stored in `traceFile`.\n\nIf `traceFile` does not exist, checks that `info` has a newer modification time\nthen `depTrace` / `oldTrace`. No log will be replayed.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.buildUnlessUpToDate?\"><span class=\"name\">Lake</span>.<span class=\"name\">buildUnlessUpToDate?</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{ι : <a href=\"./foundational_types.html\">Type</a> u_1}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lake/Build/Trace.html#Lake.CheckExists\">Lake.CheckExists</a> <span class=\"fn\">ι</span></span>]</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lake/Build/Trace.html#Lake.GetMTime\">Lake.GetMTime</a> <span class=\"fn\">ι</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(info : <span class=\"fn\">ι</span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(depTrace : <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(traceFile : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(build : <span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#PUnit\">PUnit</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(action : <a href=\"./Lake/Build/Job.html#Lake.JobAction\">Lake.JobAction</a> := <a href=\"./Lake/Build/Job.html#Lake.JobAction.build\">Lake.JobAction.build</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(oldTrace : <a href=\"./Lake/Build/Trace.html#Lake.MTime\">Lake.MTime</a> := <span class=\"fn\"><span class=\"fn\">depTrace</span>.mtime</span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L67-L82","name":"Lake.checkHashUpToDate","line":67,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.checkHashUpToDate","doc":"Checks if the `info` is up-to-date by comparing `depTrace` with `depHash`.\nIf old mode is enabled (e.g., `--old`), uses the `oldTrace` modification time\nas the point of comparison instead.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.checkHashUpToDate\"><span class=\"name\">Lake</span>.<span class=\"name\">checkHashUpToDate</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{ι : <a href=\"./foundational_types.html\">Type</a> u_1}</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lake/Build/Trace.html#Lake.CheckExists\">Lake.CheckExists</a> <span class=\"fn\">ι</span></span>]</span></span>\n</span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">[<span class=\"fn\"><a href=\"./Lake/Build/Trace.html#Lake.GetMTime\">Lake.GetMTime</a> <span class=\"fn\">ι</span></span>]</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(info : <span class=\"fn\">ι</span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(depTrace : <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(depHash : <span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lake/Build/Trace.html#Lake.Hash\">Lake.Hash</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(oldTrace : <a href=\"./Lake/Build/Trace.html#Lake.MTime\">Lake.MTime</a> := <span class=\"fn\"><span class=\"fn\">depTrace</span>.mtime</span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Build/Job.html#Lake.JobM\">Lake.JobM</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L61-L65","name":"Lake.writeTraceFile","line":61,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.writeTraceFile","doc":"Write persistent trace data to a file. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.writeTraceFile\"><span class=\"name\">Lake</span>.<span class=\"name\">writeTraceFile</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(path : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(depTrace : <a href=\"./Lake/Build/Trace.html#Lake.BuildTrace\">Lake.BuildTrace</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(log : <a href=\"./Lake/Util/Log.html#Lake.Log\">Lake.Log</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO\">IO</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L48-L59","name":"Lake.readTraceFile?","line":48,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.readTraceFile?","doc":"Read persistent trace data from a file. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.readTraceFile?\"><span class=\"name\">Lake</span>.<span class=\"name\">readTraceFile?</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(path : <a href=\"./Init/System/FilePath.html#System.FilePath\">System.FilePath</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lake/Util/Log.html#Lake.LogIO\">Lake.LogIO</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lake/Build/Common.html#Lake.BuildMetadata\">Lake.BuildMetadata</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L46-L46","name":"Lake.instFromJsonBuildMetadata","line":46,"kind":"instance","docLink":"./Lake/Build/Common.html#Lake.instFromJsonBuildMetadata","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">instance</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.instFromJsonBuildMetadata\"><span class=\"name\">Lake</span>.<span class=\"name\">instFromJsonBuildMetadata</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.FromJson\">Lean.FromJson</a> <a href=\"./Lake/Build/Common.html#Lake.BuildMetadata\">Lake.BuildMetadata</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L40-L44","name":"Lake.BuildMetadata.fromJson?","line":40,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.BuildMetadata.fromJson?","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.BuildMetadata.fromJson?\"><span class=\"name\">Lake</span>.<span class=\"name\">BuildMetadata</span>.<span class=\"name\">fromJson?</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(json : <a href=\"./Lean/Data/Json/Basic.html#Lean.Json\">Lean.Json</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Except\">Except</a> <a href=\"./Init/Prelude.html#String\">String</a> <a href=\"./Lake/Build/Common.html#Lake.BuildMetadata\">Lake.BuildMetadata</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L37-L38","name":"Lake.BuildMetadata.ofHash","line":37,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.BuildMetadata.ofHash","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.BuildMetadata.ofHash\"><span class=\"name\">Lake</span>.<span class=\"name\">BuildMetadata</span>.<span class=\"name\">ofHash</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(h : <a href=\"./Lake/Build/Trace.html#Lake.Hash\">Lake.Hash</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lake/Build/Common.html#Lake.BuildMetadata\">Lake.BuildMetadata</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L35-L35","name":"Lake.instToJsonBuildMetadata","line":35,"kind":"instance","docLink":"./Lake/Build/Common.html#Lake.instToJsonBuildMetadata","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">instance</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.instToJsonBuildMetadata\"><span class=\"name\">Lake</span>.<span class=\"name\">instToJsonBuildMetadata</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/Json/FromToJson.html#Lean.ToJson\">Lean.ToJson</a> <a href=\"./Lake/Build/Common.html#Lake.BuildMetadata\">Lake.BuildMetadata</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L34-L34","name":"Lake.BuildMetadata.log","line":34,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.BuildMetadata.log","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.BuildMetadata.log\"><span class=\"name\">Lake</span>.<span class=\"name\">BuildMetadata</span>.<span class=\"name\">log</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lake/Build/Common.html#Lake.BuildMetadata\">Lake.BuildMetadata</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lake/Util/Log.html#Lake.Log\">Lake.Log</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L33-L33","name":"Lake.BuildMetadata.depHash","line":33,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.BuildMetadata.depHash","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.BuildMetadata.depHash\"><span class=\"name\">Lake</span>.<span class=\"name\">BuildMetadata</span>.<span class=\"name\">depHash</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(self : <a href=\"./Lake/Build/Common.html#Lake.BuildMetadata\">Lake.BuildMetadata</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lake/Build/Trace.html#Lake.Hash\">Lake.Hash</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L32-L32","name":"Lake.BuildMetadata.mk","line":32,"kind":"ctor","docLink":"./Lake/Build/Common.html#Lake.BuildMetadata.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.BuildMetadata.mk\"><span class=\"name\">Lake</span>.<span class=\"name\">BuildMetadata</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(depHash : <a href=\"./Lake/Build/Trace.html#Lake.Hash\">Lake.Hash</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(log : <a href=\"./Lake/Util/Log.html#Lake.Log\">Lake.Log</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lake/Build/Common.html#Lake.BuildMetadata\">Lake.BuildMetadata</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L28-L35","name":"Lake.BuildMetadata","line":28,"kind":"structure","docLink":"./Lake/Build/Common.html#Lake.BuildMetadata","doc":"The build trace file format,\nwhich stores information about a (successful) build.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.BuildMetadata\"><span class=\"name\">Lake</span>.<span class=\"name\">BuildMetadata</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/410fab7284703f41660ca2454218dcca9b2ec896/src/lake/Lake/Build/Common.lean#L21-L26","name":"Lake.platformTrace","line":21,"kind":"def","docLink":"./Lake/Build/Common.html#Lake.platformTrace","doc":"Build trace for the host platform.\nIf an artifact includes this in its trace, it is platform-dependent\nand will be rebuilt on different host platforms.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lake/Build/Common.html#Lake.platformTrace\"><span class=\"name\">Lake</span>.<span class=\"name\">platformTrace</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lake/Build/Trace.html#Lake.Hash\">Lake.Hash</a></div></div>"}]}