<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="icon" href="../../.././favicon.svg"></link><link rel="mask-icon" href="../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Tactic.FunProp.RefinedDiscrTree</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Mathlib.Tactic.FunProp.RefinedDiscrTree";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Init.html">Init</a></li><li><a href="../../.././Mathlib/Tactic/FunProp/StateList.html">Mathlib.Tactic.FunProp.StateList</a></li><li><a href="../../.././Mathlib/Algebra/Group/Pi/Basic.html">Mathlib.Algebra.Group.Pi.Basic</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Tactic.FunProp.RefinedDiscrTree" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.Key"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedKey</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instBEqKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instBEqKey</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instReprKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instReprKey</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instHashableKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instHashableKey</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.ctorIdx"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span>.<span class="name">ctorIdx</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instLTKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instLTKey</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instDecidableLtKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instDecidableLtKey</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatKey</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.arity"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span>.<span class="name">arity</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedTrie"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedTrie</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkPath"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">mkPath</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.singleton"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">singleton</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkNode2"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">mkNode2</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.values!"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">values!</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.children!"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">children!</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatTrie"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatTrie</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabited"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabited</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormat"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormat</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instBEqDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instBEqDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instReprDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instReprDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.size"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">size</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.flatten"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">flatten</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.reduce"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">reduce</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.lambdaTelescopeReduce"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">lambdaTelescopeReduce</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.isStar"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">isStar</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.isStarWithArg"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">isStarWithArg</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.hasLooseBVars"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">hasLooseBVars</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.getIgnores"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">getIgnores</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.getIgnores.isIgnoredArg"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">getIgnores</span>.<span class="name">isIgnoredArg</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.etaExpand"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">etaExpand</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOpAux"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceHBinOpAux</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOpAux.distributeLambdas"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceHBinOpAux</span>.<span class="name">distributeLambdas</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOp"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceHBinOp</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceUnOpAux</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux.distributeLambdas"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceUnOpAux</span>.<span class="name">distributeLambdas</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOp"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceUnOp</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.mkDTExprAux"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">mkDTExprAux</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.instMonadCacheExprDTExprM"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">instMonadCacheExprDTExprM</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.etaPossibilities"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">etaPossibilities</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">cacheEtaPossibilities</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.mkDTExprsAux"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">mkDTExprsAux</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.isSpecific"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">isSpecific</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.mkDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.mkDTExprs"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkDTExprs</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.insertInTrie"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">insertInTrie</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.insertInRefinedDiscrTree"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">insertInRefinedDiscrTree</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.insertDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">insertDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.insert"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">insert</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.insertEqn"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">insertEqn</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.findKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">findKey</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.skipEntries"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">skipEntries</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchTargetStar"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">matchTargetStar</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchTreeStars"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">matchTreeStars</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">matchExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.exactMatch"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">exactMatch</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScore"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">getMatchWithScore</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScoreWithExtra"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">getMatchWithScoreWithExtra</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScoreWithExtra.go"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">getMatchWithScoreWithExtra</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mapArraysM"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">mapArraysM</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.mapArraysM"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mapArraysM</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Meta.FunProp.RefinedDiscrTree.mapArrays"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mapArrays</span></a></div></nav><main>
<div class="mod_doc"><p>We define discrimination trees for the purpose of unifying local expressions with library results.</p><p>This structure is based on <code><a href="../../.././Lean/Meta/DiscrTreeTypes.html#Lean.Meta.DiscrTree">Lean.Meta.DiscrTree</a></code>.
I document here what features are not in the original:</p><ul>
<li><p>The keys <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lam">Key.lam</a></code>, <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.forall">Key.forall</a></code> and <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.bvar">Key.bvar</a></code> have been introduced in order to allow for
matching under lambda and forall binders. <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lam">Key.lam</a></code> has arity 1 and indexes the body.
<code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.forall">Key.forall</a></code> has arity 2 and indexes the domain and the body. The reason for not indexing the
domain of a lambda expression is that it is usually already determined, for example in
<code>∃ a : α, p</code>, which is <code>@Exists α fun a : α =&gt; p</code>, we don't want to index the domain <code>α</code> twice.
In a forall expression it is necessary to index the domain, because in an implication <code>p → q</code>
we need to index both <code>p</code> and <code>q</code>. <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.bvar">Key.bvar</a></code> works the same as <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.fvar">Key.fvar</a></code>, but stores the
De Bruijn index to identify it.</p>
<p>For example, this allows for more specific matching with the left hand side of
<code>∑ i ∈ range n, i = n * (n - 1) / 2</code>, which is indexed by
<code>[⟨Finset.sum, 5⟩, ⟨Nat, 0⟩, ⟨Nat, 0⟩, *0, ⟨Finset.Range, 1⟩, *1, λ, ⟨#0, 0⟩]</code>.</p>
</li>
<li><p>The key <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">Key.star</a></code> takes a <code><a href="../../.././Init/Prelude.html#Nat">Nat</a></code> identifier as an argument. For example,
the library pattern <code>?a + ?a</code> is encoded as <code>[⟨HAdd.hAdd, 6⟩, *0, *0, *0, *1, *2, *2]</code>.
<code>*0</code> corresponds to the type of <code>a</code>, <code>*1</code> to the <code><a href="../../.././Init/Prelude.html#HAdd">HAdd</a></code> instance, and <code>*2</code> to <code>a</code>.
This means that it will only match an expression <code>x + y</code> if <code>x</code> is definitionally equal to <code>y</code>.
The matching algorithm requires that the same stars from the discrimination tree match with
the same patterns in the lookup expression, and similarly requires that the same metavariables
form the lookup expression match with the same pattern in the discrimination tree.</p>
</li>
<li><p>The key <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.opaque">Key.opaque</a></code> has been introduced in order to index existential variables
in lemmas like <code>Nat.exists_prime_and_dvd {n : ℕ} (hn : n ≠ 1) : ∃ p, Prime p ∧ p ∣ n</code>,
where the part <code>Prime p</code> gets the pattern <code>[⟨Nat.Prime, 1⟩, ◾]</code>. (◾ represents <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.opaque">Key.opaque</a></code>)
When matching, <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.opaque">Key.opaque</a></code> can only be matched by <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">Key.star</a></code>.</p>
<p>Using the <code>WhnfCoreConfig</code> argument, it is possible to disable β-reduction and ζ-reduction.
As a result, we may get a lambda expression applied to an argument or a let-expression.
Since there is no support for indexing these, they will be indexed by <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.opaque">Key.opaque</a></code>.</p>
</li>
<li><p>We keep track of the matching score of a unification.
This score represents the number of keys that had to be the same for the unification to succeed.
For example, matching <code>(1 + 2) + 3</code> with <code><a href="../../.././Mathlib/Algebra/Group/Defs.html#add_comm">add_comm</a></code> gives a score of 2,
since the pattern of commutativity is [⟨HAdd.hAdd, 6⟩, *0, *0, *0, *1, *2, *3],
so matching <code>⟨HAdd.hAdd, 6⟩</code> gives 1 point,
and matching <code>*0</code> after its first appearance gives another point, but the third argument is an
outParam, so this gets ignored. Similarly, matching it with <code><a href="../../.././Mathlib/Algebra/Group/Defs.html#add_assoc">add_assoc</a></code> gives a score of 5.</p>
</li>
<li><p>Patterns that have the potential to be η-reduced are put into the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code> under all
possible reduced key sequences. This is for terms of the form <code>fun x =&gt; f (?m x₁ .. xₙ)</code>, where
<code>?m</code> is a metavariable, and one of <code>x₁, .., xₙ</code> in <code>x</code>.
For example, the pattern <code>Continuous fun y =&gt; Real.exp (f y)])</code> is indexed by
both <code>[⟨Continuous, 5⟩, *0, ⟨Real, 0⟩, *1, *2, λ, ⟨Real.exp⟩, *3]</code>
and  <code>[⟨Continuous, 5⟩, *0, ⟨Real, 0⟩, *1, *2, ⟨Real.exp⟩]</code>
so that it also comes up if you search with <code>Continuous Real.exp</code>.
Similarly, <code>Continuous fun x =&gt; f x + g x</code> is indexed by
both <code>[⟨Continuous, 1⟩, λ, ⟨HAdd.hAdd, 6⟩, *0, *0, *0, *1, *2, *3]</code>
and  <code>[⟨Continuous, 1⟩, ⟨HAdd.hAdd, 5⟩, *0, *0, *0, *1, *2]</code>.</p>
</li>
<li><p>For sub-expressions not at the root of the original expression we have some additional reductions:</p>
<ul>
<li>Any combination of <code>ofNat</code>, <code><a href="../../.././Init/Prelude.html#Nat.zero">Nat.zero</a></code>, <code><a href="../../.././Init/Prelude.html#Nat.succ">Nat.succ</a></code> and number literals
is stored as just a number literal.</li>
<li>The expression <code>fun a : α =&gt; a</code> is stored as <code>@id α</code>.<ul>
<li>This makes lemmata such as <code>continuous_id'</code> redundant, which is the same as <code>continuous_id</code>,
with <code><a href="../../.././Init/Prelude.html#id">id</a></code> replaced by <code>fun x =&gt; x</code>.</li>
</ul>
</li>
<li>Any expressions involving <code>+</code>, <code>*</code>, <code>-</code>, <code>/</code> or <code>⁻¹</code> is normalized to not have a lambda
in front and to always have the default amount of arguments.
e.g. <code>(f + g) a</code> is stored as <code>f a + g a</code> and <code>fun x =&gt; f x + g x</code> is stored as <code>f + g</code>.<ul>
<li>This makes lemmata such as <code>MeasureTheory.integral_integral_add'</code> redundant, which is the
same as <code>MeasureTheory.integral_integral_add</code>, with <code>f a + g a</code> replaced by <code>(f + g) a</code></li>
<li>it also means that a lemma like <code>Continuous.mul</code> can be stated as talking about <code>f * g</code>
instead of <code>fun x =&gt; f x + g x</code>.</li>
</ul>
</li>
</ul>
</li>
</ul><p>I have also made some changes in the implementation:</p><ul>
<li>Instead of directly converting from <code>Expr</code> to <code><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Key</a></code> during insertion, and directly
looking up from an <code>Expr</code> during lookup, I defined the intermediate structure <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code>,
which is a form of <code>Expr</code> that only contains information relevant for the discrimination tree.
Each <code>Expr</code> is transformed into a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code> before insertion or lookup. For insertion there
could be multiple <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code> representations due to potential η-reductions as mentioned above.</li>
</ul><p>TODO:</p><ul>
<li><p>More thought could be put into the matching algorithm for non-trivial unifications.
For example, when looking up the expression <code>?a + ?a</code> (for rewriting), there will only be
results like <code>n + n = 2 * n</code> or <code>a + b = b + a</code>, but not like <code>n + 1 = n.succ</code>,
even though this would still unify.</p>
</li>
<li><p>The reason why implicit arguments are not ignored by the discrimination tree is that they provide
important type information. Because of this it seems more natural to index the types of
expressions instead of indexing the implicit type arguments. Then each key would additionally
index the type of that expression. So instead of indexing <code>?a + ?b</code> as
<code>[⟨HAdd.hAdd, 6⟩, *0, *0, *0, *1, *2, *3]</code>, it would be indexed by something like
<code>[(*0, ⟨HAdd.hAdd, 6⟩), _, _, _, _, (*0, *1), (*0, *2)]</code>.
The advantage of this would be that there will be less duplicate indexing of types,
because many functions index the types of their arguments and their return type
with implicit arguments, meaning that types unnecessarily get indexed multiple times.
This modification can be explored, but it could very well not be an improvement.</p>
</li>
</ul></div><div class="mod_doc"><h2 class="markdown-heading" id="Definitions">Definitions <a class="hover-link" href="#Definitions">#</a></h2></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L112-L135">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>Discrimination tree key.</p><ul class="constructors"><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">star: <span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span><div class="inductive_ctor_doc"><p>A metavariable. This key matches with anything. It stores an index.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.opaque">opaque: <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a><div class="inductive_ctor_doc"><p>An opaque variable. This key only matches with itself or <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">Key.star</a></code>.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.const">const: <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span></span><div class="inductive_ctor_doc"><p>A constant. It stores the name and the arity.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.fvar">fvar: <span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> → <span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span></span><div class="inductive_ctor_doc"><p>A free variable. It stores the <code>FVarId</code> and the arity.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.bvar">bvar: <span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> → <a href="../../.././Init/Prelude.html#Nat">ℕ</a> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span><div class="inductive_ctor_doc"><p>A bound variable, from a lambda or forall binder.
It stores the De Bruijn index and the arity.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lit">lit: <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Literal">Lean.Literal</a> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span><div class="inductive_ctor_doc"><p>A literal.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.sort">sort: <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a><div class="inductive_ctor_doc"><p>A sort. Universe levels are ignored.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lam">lam: <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a><div class="inductive_ctor_doc"><p>A lambda function.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.forall">forall: <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a><div class="inductive_ctor_doc"><p>A dependent arrow.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.proj">proj: <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> → <a href="../../.././Init/Prelude.html#Nat">ℕ</a> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span></span><div class="inductive_ctor_doc"><p>A projection. It stores the structure name, the projection index and the arity.</p></div></li></ul><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.Key" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L135-L135">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedKey">Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedKey</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star</a> <span class="fn">default</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instBEqKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L135-L135">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instBEqKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instBEqKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instBEqKey">Mathlib.Meta.FunProp.RefinedDiscrTree.instBEqKey</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">beq</span> := <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.beqKey._@.Mathlib.Tactic.FunProp.RefinedDiscrTree._hyg.133">Mathlib.Meta.FunProp.RefinedDiscrTree.beqKey✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instReprKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L135-L135">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instReprKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instReprKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Repr.html#Repr">Repr</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instReprKey">Mathlib.Meta.FunProp.RefinedDiscrTree.instReprKey</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">reprPrec</span> := <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.reprKey._@.Mathlib.Tactic.FunProp.RefinedDiscrTree._hyg.501">Mathlib.Meta.FunProp.RefinedDiscrTree.reprKey✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instHashableKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L149-L149">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instHashableKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instHashableKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Hashable">Hashable</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instHashableKey">Mathlib.Meta.FunProp.RefinedDiscrTree.instHashableKey</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">hash</span> := <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.Key.hash">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.hash</a> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.ctorIdx"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L151-L164">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.ctorIdx"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span>.<span class="name">ctorIdx</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a> → <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span></div></div><p>Constructor index used for ordering <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Key</a></code>.
Note that the index of the star pattern is 0, so that when looking up in a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a></code>,
we can look at the start of the sorted array for all <code>.<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">star</a></code> patterns.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star</a> <span class="fn">a</span>)</span>.ctorIdx</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">0</span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.opaque">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.opaque</a>.ctorIdx</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">1</span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.const">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.const</a> <span class="fn">a</span> <span class="fn">a_1</span>)</span>.ctorIdx</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">2</span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.fvar">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.fvar</a> <span class="fn">a</span> <span class="fn">a_1</span>)</span>.ctorIdx</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">3</span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.bvar">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.bvar</a> <span class="fn">a</span> <span class="fn">a_1</span>)</span>.ctorIdx</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">4</span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lit">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lit</a> <span class="fn">a</span>)</span>.ctorIdx</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">5</span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.sort">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.sort</a>.ctorIdx</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">6</span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lam">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lam</a>.ctorIdx</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">7</span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.forall">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.forall</a>.ctorIdx</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">8</span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.proj">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.proj</a> <span class="fn">a</span> <span class="fn">a_1</span> <span class="fn">a_2</span>)</span>.ctorIdx</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">9</span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.Key.ctorIdx" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instLTKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L177-L177">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instLTKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instLTKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#LT">LT</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instLTKey">Mathlib.Meta.FunProp.RefinedDiscrTree.instLTKey</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{
    <span class="fn">lt</span> := <span class="fn">fun (<span class="fn">a</span> <span class="fn">b</span> : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a>) =&gt;
      <span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lt">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lt</a> <span class="fn">a</span> <span class="fn">b</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instDecidableLtKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L178-L178">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instDecidableLtKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instDecidableLtKey</span></a></span><span class="decl_args">
<span class="fn">(a b : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Decidable">Decidable</a> <span class="fn">(<span class="fn">a</span> <a href="../../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn">b</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instDecidableLtKey">Mathlib.Meta.FunProp.RefinedDiscrTree.instDecidableLtKey</a> <span class="fn">a</span> <span class="fn">b</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Init/Prelude.html#inferInstanceAs">inferInstanceAs</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Decidable">Decidable</a> <span class="fn">(<span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lt">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lt</a> <span class="fn">a</span> <span class="fn">b</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a>)</span>)</span></span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatKey"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L193-L193">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatKey</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Format/Basic.html#Std.ToFormat">Lean.ToFormat</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatKey">Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatKey</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">format</span> := <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.Key.format">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.format</a> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Key.arity"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L195-L203">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.arity"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Key</span>.<span class="name">arity</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a> → <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span></div></div><p>Return the number of arguments that the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Key</a></code> takes.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.const">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.const</a> <span class="fn">a</span> <span class="fn">a_1</span>)</span>.arity</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">a_1</span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.fvar">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.fvar</a> <span class="fn">a</span> <span class="fn">a_1</span>)</span>.arity</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">a_1</span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.bvar">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.bvar</a> <span class="fn">a</span> <span class="fn">a_1</span>)</span>.arity</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">a_1</span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lam">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.lam</a>.arity</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">1</span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.forall">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.forall</a>.arity</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">2</span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.proj">Mathlib.Meta.FunProp.RefinedDiscrTree.Key.proj</a> <span class="fn">a</span> <span class="fn">a_1</span> <span class="fn">a_2</span>)</span>.arity</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">1</span> <a href="../../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">a_2</span></span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">x</span>.arity</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">0</span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.Key.arity" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Trie"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L206-L214">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>Discrimination tree trie. See <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code>.</p><ul class="constructors"><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.node">node: <span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>} →
  <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span> →
    <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span></span></span><div class="inductive_ctor_doc"><p>Map from <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Key</a></code> to <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a></code>. Children is an <code><a href="../../.././Init/Prelude.html#Array">Array</a></code> of size at least 2,
sorted in increasing order using <code>Key.lt</code>.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.path">path: <span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>} →
  <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span> →
    <span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span> → <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span></span></span></span><div class="inductive_ctor_doc"><p>Sequence of nodes with only one child. <code>keys</code> is an <code><a href="../../.././Init/Prelude.html#Array">Array</a></code> of size at least 1.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.values">values: <span class="fn">{<span class="fn">α</span> : <a href="../../.././foundational_types.html">Type</a>} → <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span> → <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span></span></span><div class="inductive_ctor_doc"><p>Leaf of the Trie. <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.values">values</a></code> is an <code><a href="../../.././Init/Prelude.html#Array">Array</a></code> of size at least 1.</p></div></li></ul><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.Trie" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedTrie"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L215-L215">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedTrie"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedTrie</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedTrie</span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.node">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.node</a> <span class="fn">#[]</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkPath"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L217-L219">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkPath"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">mkPath</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(keys : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(child : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span></div></div><p><code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.path">Trie.path</a></code> constructor that only inserts the path if it is non-empty.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkPath">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkPath</a> <span class="fn">keys</span> <span class="fn">child</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if <span class="fn"><span class="fn"><span class="fn">keys</span>.isEmpty</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">child</span> else <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.path">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.path</a> <span class="fn">keys</span> <span class="fn">child</span></span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkPath" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.singleton"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L221-L223">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.singleton"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">singleton</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(keys : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(value : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(i : <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span></div></div><p><code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a></code> constructor for a single value, taking the keys starting at index <code>i</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.singleton" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkNode2"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L225-L230">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkNode2"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">mkNode2</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(k1 : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a>)</span></span>
<span class="decl_args">
<span class="fn">(t1 : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(k2 : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a>)</span></span>
<span class="decl_args">
<span class="fn">(t2 : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span></div></div><p><code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.node">Trie.node</a></code> constructor for combining two <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Key</a></code>, <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a> α</code> pairs.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkNode2" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.values!"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L232-L235">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.values!"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">values!</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span> → <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span></span></div></div><p>Return the values from a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a> α</code>, assuming that it is a leaf</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.values">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.values</a> <span class="fn">vs</span>)</span>.values!</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">vs</span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">x</span>.values!</span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Init/Util.html#panicWithPosWithDecl">panicWithPosWithDecl</a> <span class="fn">&quot;Mathlib.Tactic.FunProp.RefinedDiscrTree&quot;</span> <span class="fn">&quot;Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.values!&quot;</span>
    <span class="fn">235</span> <span class="fn">9</span> <span class="fn">&quot;expected .values constructor&quot;</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.values!" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.children!"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L237-L242">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.children!"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">children!</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span> →
  <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span></span></div></div><p>Return the children of a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a> α</code>, assuming that it is not a leaf.
The result is sorted by the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Key</a></code>'s</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.node">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.node</a> <span class="fn">cs</span>)</span>.children!</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">cs</span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.path">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.path</a> <span class="fn">ks</span> <span class="fn">c</span>)</span>.children!</span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">#[<span class="fn">(<span class="fn"><span class="fn">ks</span>[<span class="fn">0</span>]!</span>,
      <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkPath">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mkPath</a>
        <span class="fn">(let <span class="fn">a</span> := <span class="fn">ks</span>;
        <span class="fn">↑<span class="fn">(<span class="fn"><span class="fn">a</span>.toSubarray</span> <span class="fn">1</span>)</span></span>)</span>
        <span class="fn">c</span></span>)</span>]</span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.children!" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatTrie"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L255-L255">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatTrie"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatTrie</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Format/Basic.html#Std.ToFormat">Lean.ToFormat</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Format/Basic.html#Std.ToFormat">Lean.ToFormat</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatTrie</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">format</span> := <span class="fn">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.format</span> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L258-L261">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>Discrimination tree. It is an index from expressions to values of type <code>α</code>.</p><ul class="structure_fields" id="Mathlib.Meta.FunProp.RefinedDiscrTree.mk"><li id="Mathlib.Meta.FunProp.RefinedDiscrTree.root" class="structure_field"><div class="structure_field_info">root : <span class="fn"><a href="../../.././Lean/Data/PersistentHashMap.html#Lean.PersistentHashMap">Lean.PersistentHashMap</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></div><div class="structure_field_doc"><p>The underlying <code>PersistentHashMap</code> of a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code>.</p></div></li></ul><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabited"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L262-L262">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabited"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabited</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabited</span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">root</span> := <span class="fn">{ <span class="fn">root</span> := <span class="fn"><a href="../../.././Lean/Data/PersistentHashMap.html#Lean.PersistentHashMap.Node.entries">Lean.PersistentHashMap.Node.entries</a> <span class="fn">Lean.PersistentHashMap.mkEmptyEntriesArray</span></span> }</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormat"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L273-L273">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormat"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormat</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Data/Format/Basic.html#Std.ToFormat">Lean.ToFormat</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Format/Basic.html#Std.ToFormat">Lean.ToFormat</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormat</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">format</span> := <span class="fn">Mathlib.Meta.FunProp.RefinedDiscrTree.format</span> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L276-L299">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p><code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code> is a simplified form of <code>Expr</code>.
It is the intermediate step for converting from <code>Expr</code> to <code><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Key</a></code>.</p><ul class="constructors"><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.star">star: <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span><div class="inductive_ctor_doc"><p>A metavariable. It optionally stores an <code>MVarId</code>.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.opaque">opaque: <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a><div class="inductive_ctor_doc"><p>An opaque variable or a let-expression in the case <code>WhnfCoreConfig.zeta := false</code>.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.const">const: <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></span><div class="inductive_ctor_doc"><p>A constant. It stores the name and the arguments.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.fvar">fvar: <span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> → <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></span><div class="inductive_ctor_doc"><p>A free variable. It stores the <code>FVarId</code> and the arguments</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.bvar">bvar: <span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> → <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></span><div class="inductive_ctor_doc"><p>A bound variable. It stores the De Bruijn index and the arguments</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.lit">lit: <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Literal">Lean.Literal</a> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span><div class="inductive_ctor_doc"><p>A literal.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.sort">sort: <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a><div class="inductive_ctor_doc"><p>A sort.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.lam">lam: <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span><div class="inductive_ctor_doc"><p>A lambda function. It stores the body.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.forall">forall: <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a> →
  <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span><div class="inductive_ctor_doc"><p>A dependent arrow. It stores the domain and body.</p></div></li><li class="constructor" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.proj">proj: <span class="fn"><a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a> →
  <span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> →
    <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a> →
      <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span> → <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></span></span></span><div class="inductive_ctor_doc"><p>A projection. It stores the structure name, projection index, struct body and arguments.</p></div></li></ul><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedDTExpr"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L299-L299">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedDTExpr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedDTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.instInhabitedDTExpr</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.star">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.star</a> <span class="fn">default</span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instBEqDTExpr"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L299-L299">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instBEqDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instBEqDTExpr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instBEqDTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.instBEqDTExpr</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">beq</span> := <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.beqDTExpr._@.Mathlib.Tactic.FunProp.RefinedDiscrTree._hyg.2657">Mathlib.Meta.FunProp.RefinedDiscrTree.beqDTExpr✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instReprDTExpr"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L299-L299">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instReprDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instReprDTExpr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Repr.html#Repr">Repr</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instReprDTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.instReprDTExpr</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">reprPrec</span> := <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.reprDTExpr._@.Mathlib.Tactic.FunProp.RefinedDiscrTree._hyg.3114">Mathlib.Meta.FunProp.RefinedDiscrTree.reprDTExpr✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatDTExpr"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L319-L319">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatDTExpr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Format/Basic.html#Std.ToFormat">Lean.ToFormat</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatDTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.instToFormatDTExpr</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">format</span> := <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.format">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.format</a> }</span></span></li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.size"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L321-L331">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.size"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">size</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a> → <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span></div></div><p>Return the size of the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code>. This is used for calculating the matching score when two
expressions are equal.
The score is not incremented at a lambda, which is so that the expressions
<code>∀ x, p[x]</code> and <code>∃ x, p[x]</code> get the same size.</p></div></div><div class="mod_doc"><h2 class="markdown-heading" id="Encoding-an-Expr">Encoding an Expr <a class="hover-link" href="#Encoding-an-Expr">#</a></h2></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.flatten"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L390-L393">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.flatten"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">flatten</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a>)</span></span>
<span class="decl_args">
<span class="fn">(initCapacity : <a href="../../.././Init/Prelude.html#Nat">ℕ</a> := <span class="fn">16</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span></div></div><p>Given a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code>, return the linearized encoding in terms of <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Key</a></code>,
which is used for <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code> indexing.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">e</span>.flatten</span> <span class="fn">initCapacity</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Init/Control/State.html#StateT.run'">StateT.run'</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.flattenAux">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.flattenAux</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array.mkEmpty">Array.mkEmpty</a> <span class="fn">initCapacity</span>)</span> <span class="fn">e</span>)</span> <span class="fn">{ <span class="fn">stars</span> := <span class="fn">#[]</span> }</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.flatten" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.reduce"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L440-L447">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.reduce"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">reduce</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Reduction procedure for the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code> indexing.</p></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.lambdaTelescopeReduce"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L449-L458">source</a></div><div class="attributes">@[specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.lambdaTelescopeReduce"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">lambdaTelescopeReduce</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a> u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Control/Basic.html#MonadControlT">MonadControlT</a> <a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(fvars : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span> → <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Repeatedly apply reduce while stripping lambda binders and introducing their variables</p></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.isStar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L462-L466">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.isStar"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">isStar</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Check whether the expression is represented by <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">Key.star</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.isStar">Mathlib.Meta.FunProp.RefinedDiscrTree.isStar</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.Expr.mvar">Lean.Expr.mvar</a> <span class="fn">mvarId</span>)</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.true">true</a></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.isStar">Mathlib.Meta.FunProp.RefinedDiscrTree.isStar</a> <span class="fn">(<span class="fn"><span class="fn">f</span>.app</span> <span class="fn">arg</span>)</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.isStar">Mathlib.Meta.FunProp.RefinedDiscrTree.isStar</a> <span class="fn">f</span></span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.isStar">Mathlib.Meta.FunProp.RefinedDiscrTree.isStar</a> <span class="fn">x</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.false">false</a></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.isStar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.isStarWithArg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L468-L471">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.isStarWithArg"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">isStarWithArg</span></a></span><span class="decl_args">
<span class="fn">(arg : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Check whether the expression is represented by <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">Key.star</a></code> and has <code>arg</code> as an argument.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.isStarWithArg">Mathlib.Meta.FunProp.RefinedDiscrTree.isStarWithArg</a> <span class="fn">arg</span> <span class="fn">x</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <a href="../../.././Init/Prelude.html#Bool.false">false</a></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.isStarWithArg" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.hasLooseBVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L482-L484">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.hasLooseBVars"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">hasLooseBVars</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Return <code>true</code> if <code>e</code> contains a loose bound variable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">e</span>.hasLooseBVars</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.hasLooseBVarsAux">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.hasLooseBVarsAux</a> <span class="fn">0</span> <span class="fn">e</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.hasLooseBVars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.getIgnores"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L498-L520">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.getIgnores"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">getIgnores</span></a></span><span class="decl_args">
<span class="fn">(fn : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span></div></div><p>Return for each argument whether it should be ignored.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.getIgnores" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.getIgnores.isIgnoredArg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L513-L520">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.getIgnores.isIgnoredArg"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">getIgnores</span>.<span class="name">isIgnoredArg</span></a></span><span class="decl_args">
<span class="fn">(arg domain : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(binderInfo : <a href="../../.././Lean/Expr.html#Lean.BinderInfo">Lean.BinderInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Return whether the argument should be ignored.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.getIgnores.isIgnoredArg" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.etaExpand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L524-L532">source</a></div><div class="attributes">@[irreducible, specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.etaExpand"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">etaExpand</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(type : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(lambdas : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(goalArity : <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span> → <span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">α</span></span></div></div><p>Introduce new lambdas by η-expansion.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.etaExpand" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOpAux"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L535-L570">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOpAux"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceHBinOpAux</span></a></span><span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(lambdas : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(instH instPi : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Control/Option.html#OptionT">OptionT</a> <a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span></span></span>)</span></span></div></div><p>Normalize an application of a heterogeneous binary operator like <code><a href="../../.././Init/Prelude.html#HAdd.hAdd">HAdd.hAdd</a></code>, using:</p><ul>
<li><code>f = fun x =&gt; f x</code> to increase the arity to 6</li>
<li><code>(f + g) a = f a + g a</code> to decrease the arity to 6</li>
<li><code>(fun x =&gt; f x + g x) = f + g</code> to get rid of any lambdas in front</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOpAux" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOpAux.distributeLambdas"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L562-L570">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOpAux.distributeLambdas"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceHBinOpAux</span>.<span class="name">distributeLambdas</span></a></span><span class="decl_args">
<span class="fn">(lambdas : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(type lhs rhs : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span></span></span>)</span></span></div></div><p>use that <code>(fun x =&gt; f x + g x) = f + g</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOpAux.distributeLambdas">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOpAux.distributeLambdas</a> <span class="fn">[]</span> <span class="fn">type</span> <span class="fn">lhs</span> <span class="fn">rhs</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<span class="fn">type</span>, <span class="fn">lhs</span>, <span class="fn">rhs</span>, <span class="fn">[]</span>)</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOpAux.distributeLambdas" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOp"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L572-L581">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOp"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceHBinOp</span></a></span><span class="decl_args">
<span class="fn">(n : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(lambdas : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span></span></span>)</span>)</span></span></div></div><p>Normalize an application if the head is  <code>+</code>, <code>*</code>, <code>-</code> or <code>/</code>.
Optionally return the <code>(type, lhs, rhs, lambdas)</code>.</p><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceHBinOp" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L583-L612">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceUnOpAux</span></a></span><span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(lambdas : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(instPi : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Control/Option.html#OptionT">OptionT</a> <a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span></span>)</span></span></div></div><p>Normalize an application of a unary operator like <code><a href="../../.././Mathlib/Algebra/Group/Operations.html#Inv.inv">Inv.inv</a></code>, using:</p><ul>
<li><code>f⁻¹ a = (f a)⁻¹</code> to decrease the arity to 3</li>
<li><code>(fun x =&gt; (f a)⁻¹) = f⁻¹</code> to get rid of any lambdas in front</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux.distributeLambdas"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L605-L612">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux.distributeLambdas"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceUnOpAux</span>.<span class="name">distributeLambdas</span></a></span><span class="decl_args">
<span class="fn">(lambdas : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(type arg : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span></span>)</span></span></div></div><p>use that <code>(fun x =&gt; (f x)⁻¹) = f⁻¹</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux.distributeLambdas">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux.distributeLambdas</a> <span class="fn">[]</span> <span class="fn">type</span> <span class="fn">arg</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<span class="fn">type</span>, <span class="fn">arg</span>, <span class="fn">[]</span>)</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux.distributeLambdas" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOp"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L614-L621">source</a></div><div class="attributes">@[inline]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOp"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">reduceUnOp</span></a></span><span class="decl_args">
<span class="fn">(n : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(lambdas : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span></span>)</span>)</span></span></div></div><p>Normalize an application if the head is <code>⁻¹</code> or <code>-</code>.
Optionally return the <code>(type, arg, lambdas)</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOp">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOp</a> <span class="fn">`Neg.neg</span> <span class="fn">args</span> <span class="fn">lambdas</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux</a> <span class="fn">args</span> <span class="fn">lambdas</span> <span class="fn">`Pi.instNeg</span></span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOp">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOp</a> <span class="fn">`Inv.inv</span> <span class="fn">args</span> <span class="fn">lambdas</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOpAux</a> <span class="fn">args</span> <span class="fn">lambdas</span> <span class="fn">`Pi.instInv</span></span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOp">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOp</a> <span class="fn">n</span> <span class="fn">args</span> <span class="fn">lambdas</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">none</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.reduceUnOp" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.mkDTExprAux"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L633-L707">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.mkDTExprAux"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">mkDTExprAux</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(root : <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.Context">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.Context</a> <a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></div></div><p>Return the encoding of <code>e</code> as a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code>.
If <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.root">root</a> = false</code>, then <code>e</code> is a strict sub expression of the original expression.</p></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.instMonadCacheExprDTExprM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L717-L725">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.instMonadCacheExprDTExprM"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">instMonadCacheExprDTExprM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Util/MonadCache.html#Lean.MonadCache">Lean.MonadCache</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.etaPossibilities"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L727-L739">source</a></div><div class="attributes">@[specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.etaPossibilities"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">etaPossibilities</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(lambdas : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span> → <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M</a> <span class="fn">α</span></span></div></div><p>Return all pairs of body, bound variables that could possibly appear due to η-reduction</p><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.etaPossibilities" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L741-L752">source</a></div><div class="attributes">@[specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">cacheEtaPossibilities</span></a></span><span class="decl_args">
<span class="fn">(e original : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(lambdas : <span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(k :
  <span class="fn"><a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> →
    <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a></span> → <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></div></div><p>run <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.etaPossibilities">etaPossibilities</a></code>, and cache the result if there are multiple possibilities.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities</a> <span class="fn">e</span> <span class="fn">original</span> <span class="fn">lambdas</span> <span class="fn">k</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">k</span> <span class="fn">e</span> <span class="fn">lambdas</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.mkDTExprsAux"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L755-L835">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.mkDTExprsAux"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">mkDTExprsAux</span></a></span><span class="decl_args">
<span class="fn">(original : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(root : <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M">Mathlib.Meta.FunProp.RefinedDiscrTree.MkDTExpr.M</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></div></div><p>Return all encodings of <code>e</code> as a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code>, taking possible η-reductions into account.
If <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.root">root</a> = false</code>, then <code>e</code> is a strict sub expression of the original expression.</p></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.isSpecific"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L839-L843">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.isSpecific"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">isSpecific</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr.isSpecific" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.mkDTExpr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L845-L854">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.mkDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkDTExpr</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>)</span></span>
<span class="decl_args">
<span class="fn">(fvarInContext : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a>) =&gt; <a href="../../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a></span></div></div><p>Return the encoding of <code>e</code> as a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code>.</p><p>Warning: to account for potential η-reductions of <code>e</code>, use <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.mkDTExprs">mkDTExprs</a></code> instead.</p><p>The argument <code>fvarInContext</code> allows you to specify which free variables in <code>e</code> will still be
in the context when the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code> is being used for lookup.
It should return true only if the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code> is built and used locally.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.mkDTExpr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.mkDTExprs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L856-L862">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.mkDTExprs"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkDTExprs</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>)</span></span>
<span class="decl_args">
<span class="fn">(onlySpecific : <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(fvarInContext : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a>) =&gt; <a href="../../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#List">List</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a>)</span></span></div></div><p>Similar to <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.mkDTExpr">mkDTExpr</a></code>.
Return all encodings of <code>e</code> as a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code>, taking potential further η-reductions into account.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.mkDTExprs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h2 class="markdown-heading" id="Inserting-intro-a-RefinedDiscrTree">Inserting intro a RefinedDiscrTree <a class="hover-link" href="#Inserting-intro-a-RefinedDiscrTree">#</a></h2></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.insertInTrie"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L884-L904">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.insertInTrie"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">insertInTrie</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(keys : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(v : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(i : <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span> → <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span></span></div></div><p>Insert the value <code>v</code> at index <code>keys : <a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Key</a></code> in a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a></code>.</p></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.insertInRefinedDiscrTree"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L906-L919">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.insertInRefinedDiscrTree"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">insertInRefinedDiscrTree</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(keys : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(v : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span></div></div><p>Insert the value <code>v</code> at index <code>keys : <a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Key</a></code> in a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code>.</p><p>Warning: to account for η-reduction, an entry may need to be added at multiple indexes,
so it is recommended to use <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.insert">RefinedDiscrTree.insert</a></code> for insertion.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.insertInRefinedDiscrTree" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.insertDTExpr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L921-L926">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.insertDTExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">insertDTExpr</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a>)</span></span>
<span class="decl_args">
<span class="fn">(v : <span class="fn">α</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span></div></div><p>Insert the value <code>v</code> at index <code>e : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">DTExpr</a></code> in a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code>.</p><p>Warning: to account for η-reduction, an entry may need to be added at multiple indexes,
so it is recommended to use <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.insert">RefinedDiscrTree.insert</a></code> for insertion.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">d</span>.insertDTExpr</span> <span class="fn">e</span> <span class="fn">v</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">d</span>.insertInRefinedDiscrTree</span> <span class="fn"><span class="fn">e</span>.flatten</span> <span class="fn">v</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.insertDTExpr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.insert"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L928-L938">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.insert"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">insert</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(v : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(onlySpecific : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a> :=
  <span class="fn">{ <span class="fn">iota</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">beta</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">proj</span> := <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.ProjReductionKind.yesWithDelta">Lean.Meta.ProjReductionKind.yesWithDelta</a>, <span class="fn">zeta</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">zetaDelta</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a> }</span>)</span></span>
<span class="decl_args">
<span class="fn">(fvarInContext : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a>) =&gt; <a href="../../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><p>Insert the value <code>v</code> at index <code>e : Expr</code> in a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code>.
The argument <code>fvarInContext</code> allows you to specify which free variables in <code>e</code> will still be
in the context when the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code> is being used for lookup.
It should return true only if the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code> is built and used locally.</p><p>if <code>onlySpecific := true</code>, then we filter out the patterns <code>*</code> and <code><a href="../../.././Init/Prelude.html#Eq">Eq</a> * * *</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.insert" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.insertEqn"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L940-L951">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.insertEqn"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">insertEqn</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#BEq">BEq</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(lhs rhs : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(vLhs vRhs : <span class="fn">α</span>)</span></span>
<span class="decl_args">
<span class="fn">(onlySpecific : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a> :=
  <span class="fn">{ <span class="fn">iota</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">beta</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">proj</span> := <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.ProjReductionKind.yesWithDelta">Lean.Meta.ProjReductionKind.yesWithDelta</a>, <span class="fn">zeta</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a>, <span class="fn">zetaDelta</span> := <a href="../../.././Init/Prelude.html#Bool.true">true</a> }</span>)</span></span>
<span class="decl_args">
<span class="fn">(fvarInContext : <span class="fn"><a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a> → <a href="../../.././Init/Prelude.html#Bool">Bool</a></span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../../.././Lean/Expr.html#Lean.FVarId">Lean.FVarId</a>) =&gt; <a href="../../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span>)</span></span></div></div><p>Insert the value <code>vLhs</code> at index <code>lhs</code>, and if <code>rhs</code> is indexed differently, then also
insert the value <code>vRhs</code> at index <code>rhs</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.insertEqn" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h2 class="markdown-heading" id="Matching-with-a-RefinedDiscrTree">Matching with a RefinedDiscrTree <a class="hover-link" href="#Matching-with-a-RefinedDiscrTree">#</a></h2><p>We use a very simple unification algorithm. For all star/metavariable patterns in the
<code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code> and in the target, we store the assignment, and when it is assigned again,
we check that it is the same assignment.</p></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.findKey"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L964-L966">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.findKey"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">findKey</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(children : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(k : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></div></div><p>If <code>k</code> is a key in <code>children</code>, return the corresponding <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a> α</code>. Otherwise return <code>none</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.findKey" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.skipEntries"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1004-L1009">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.skipEntries"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">skipEntries</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(t : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(skipped : <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> →
  <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.M">Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.M</a>
    <span class="fn">(<span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a></span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span></span></div></div><p>Return the possible <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a> α</code> that match with <code>n</code> metavariable.</p></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchTargetStar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1010-L1021">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchTargetStar"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">matchTargetStar</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(mvarId? : <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <a href="../../.././Lean/Expr.html#Lean.MVarId">Lean.MVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(t : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.M">Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.M</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></div></div><p>Return the possible <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a> α</code> that match with anything.
We add 1 to the matching score when the key is <code>.<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.opaque">opaque</a></code>,
since this pattern is &quot;harder&quot; to match with.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchTargetStar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchTreeStars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1023-L1037">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchTreeStars"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">matchTreeStars</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a>)</span></span>
<span class="decl_args">
<span class="fn">(t : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.M">Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.M</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></div></div><p>Return the possible <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a> α</code> that come from a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">Key.star</a></code>,
while keeping track of the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key.star">Key.star</a></code> assignments.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchTreeStars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchExpr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1040-L1048">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.matchExpr"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">matchExpr</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a>)</span></span>
<span class="decl_args">
<span class="fn">(t : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.M">Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.M</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></div></div><p>Return the possible <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a> α</code> that match with <code>e</code>.</p></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.exactMatch"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1050-L1074">source</a></div><div class="attributes">@[specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.exactMatch"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">GetUnify</span>.<span class="name">exactMatch</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr">Mathlib.Meta.FunProp.RefinedDiscrTree.DTExpr</a>)</span></span>
<span class="decl_args">
<span class="fn">(find? : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Key">Mathlib.Meta.FunProp.RefinedDiscrTree.Key</a> → <span class="fn"><a href="../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#_private.Mathlib.Tactic.FunProp.RefinedDiscrTree.0.Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.M">Mathlib.Meta.FunProp.RefinedDiscrTree.GetUnify.M</a> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span>)</span></span></div></div><p>If <code>e</code> is not a metavariable, return the possible <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Trie</a> α</code> that exactly match with <code>e</code>.</p></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScore"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1097-L1112">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScore"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">getMatchWithScore</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(unify : <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>)</span></span>
<span class="decl_args">
<span class="fn">(allowRootStar : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span> <a href="../../.././Init/Prelude.html#Prod">×</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span>)</span></span></div></div><p>Return the results from the <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code> that match the given expression,
together with their matching scores, in decreasing order of score.</p><p>Each entry of type <code><a href="../../.././Init/Prelude.html#Array">Array</a> α × <a href="../../.././Init/Prelude.html#Nat">Nat</a></code> corresponds to one pattern.</p><p>If <code>unify := false</code>, then metavariables in <code>e</code> are treated as opaque variables.
This is for when you don't want to instantiate metavariables in <code>e</code>.</p><p>If <code>allowRootStar := false</code>, then we don't allow <code>e</code> or the matched key in <code>d</code>
to be a star pattern.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScore" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScoreWithExtra"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1114-L1128">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScoreWithExtra"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">getMatchWithScoreWithExtra</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(unify : <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>)</span></span>
<span class="decl_args">
<span class="fn">(allowRootStar : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>)</span>)</span></span></div></div><p>Similar to <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScore">getMatchWithScore</a></code>, but also returns matches with prefixes of <code>e</code>.
We store the score, followed by the number of ignored arguments.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScoreWithExtra" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScoreWithExtra.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1123-L1128">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.getMatchWithScoreWithExtra.go"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">getMatchWithScoreWithExtra</span>.<span class="name">go</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(unify : <a href="../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(config : <a href="../../.././Lean/Meta/WHNF.html#Lean.Meta.WhnfCoreConfig">Lean.Meta.WhnfCoreConfig</a>)</span></span>
<span class="decl_args">
<span class="fn">(allowRootStar : <a href="../../.././Init/Prelude.html#Bool">Bool</a> := <a href="../../.././Init/Prelude.html#Bool.false">false</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(numIgnored : <a href="../../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span> <a href="../../.././Init/Prelude.html#Prod">×</a> <span class="fn"><a href="../../.././Init/Prelude.html#Nat">ℕ</a> <a href="../../.././Init/Prelude.html#Prod">×</a> <a href="../../.././Init/Prelude.html#Nat">ℕ</a></span>)</span>)</span></span></div></div><p>go</p></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mapArraysM"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1133-L1142">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie.mapArraysM"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Trie</span>.<span class="name">mapArraysM</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α β : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(t : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span> → <span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">β</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">β</span>)</span></span></div></div><p>Apply a monadic function to the array of values at each node in a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code>.</p></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.mapArraysM"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1144-L1146">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.mapArraysM"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mapArraysM</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α β : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../../.././foundational_types.html">Type</a> → <a href="../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span> → <span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">β</span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">β</span>)</span></span></div></div><p>Apply a monadic function to the array of values at each node in a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">d</span>.mapArraysM</span> <span class="fn">f</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">__do_lift</span> ← <span class="fn"><span class="fn"><span class="fn"><span class="fn">d</span>.root</span>.mapM</span> <span class="fn">fun (<span class="fn">x</span> : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.Trie">Mathlib.Meta.FunProp.RefinedDiscrTree.Trie</a> <span class="fn">α</span></span>) =&gt; <span class="fn"><span class="fn"><span class="fn">x</span>.mapArraysM</span> <span class="fn">f</span></span></span></span>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">{ <span class="fn">root</span> := <span class="fn">__do_lift</span> }</span></span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.mapArraysM" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Meta.FunProp.RefinedDiscrTree.mapArrays"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/4bbdccd9c5f862bf90ff12f0a9e2c8be032b9a84/Mathlib/Tactic/FunProp/RefinedDiscrTree.lean#L1148-L1150">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree.mapArrays"><span class="name">Mathlib</span>.<span class="name">Meta</span>.<span class="name">FunProp</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mapArrays</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α β : <a href="../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(d : <span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span> → <span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <span class="fn">β</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">Mathlib.Meta.FunProp.RefinedDiscrTree</a> <span class="fn">β</span></span></div></div><p>Apply a function to the array of values at each node in a <code><a href="../../.././Mathlib/Tactic/FunProp/RefinedDiscrTree.html#Mathlib.Meta.FunProp.RefinedDiscrTree">RefinedDiscrTree</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn"><span class="fn">d</span>.mapArrays</span> <span class="fn">f</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">d</span>.mapArraysM</span> <span class="fn">f</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Meta.FunProp.RefinedDiscrTree.mapArrays" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>